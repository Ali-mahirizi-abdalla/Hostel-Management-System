<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hostel Booking</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/professional.css' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-left">
                <a href="{% url 'index' %}" class="nav-logo">ğŸ¨ Hostel Management</a>
            </div>
            <div class="nav-right">
                {% if user.is_authenticated %}
                    <span class="nav-user">ğŸ‘¤ {{ user.username }}</span>
                    <a href="{% url 'logout' %}" class="nav-link">Logout</a>
                    <a href="{% url 'show_data' %}" class="nav-link">Data Viewer</a>
                {% else %}
                    <a href="{% url 'login' %}" class="nav-link">Login</a>
                    <a href="{% url 'register' %}" class="nav-link nav-register">Register</a>
                {% endif %}
            </div>
        </div>
    </nav>

    <h1>ğŸ¨ Hostel Management System</h1>
    <p style="text-align: center; font-size: 16px; color: #667eea; font-weight: 600; margin: 15px 20px 30px 20px; padding: 0 20px;">Welcome to our Professional Hostel Booking System</p>

    {% if messages %}
    <div class="messages">
        {% for message in messages %}
        <div class="alert alert-{% if message.level == 40 %}error{% else %}success{% endif %}">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <h2>ğŸ“Š Quick Stats</h2>
    <div class="stats-container">
        <div class="stat-card">
            <div class="stat-number">{{ total_rooms }}</div>
            <div class="stat-label">Total Rooms</div>
        </div>
        <div class="stat-card" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%);">
            <div class="stat-number">{{ available_rooms }}</div>
            <div class="stat-label">Available Rooms</div>
        </div>
        <div class="stat-card" style="background: linear-gradient(135deg, #dc3545 0%, #e74c3c 100%);">
            <div class="stat-number">{{ occupied_rooms }}</div>
            <div class="stat-label">Occupied Rooms</div>
        </div>
        <div class="stat-card" style="background: linear-gradient(135deg, #17a2b8 0%, #3498db 100%);">
            <div class="stat-number">{{ total_guests }}</div>
            <div class="stat-label">Total Guests</div>
        </div>
    </div>

    <h2>ğŸ”– Book a Room</h2>
    <div style="max-width: 1000px; margin: 30px auto; padding: 0 20px;">
    <form method="POST" action="{% url 'book_room' %}">
        {% csrf_token %}
        <label for="name">Full Name:</label><br>
        <input type="text" id="name" name="name" placeholder="Enter your full name" required><br><br>

        <label for="email">Email:</label><br>
        <input type="email" id="email" name="email" placeholder="Enter your email" required><br><br>

        <label for="phone">Phone Number:</label><br>
        <input type="tel" id="phone" name="phone" placeholder="Enter your phone number" required><br><br>

        <label for="roomtype">Room Type:</label><br>
        <select id="roomtype" name="roomtype" required>
            <option value="">-- Select Room Type --</option>
            <option value="single">Single</option>
            <option value="double">Double</option>
            <option value="dorm">Dorm (4 beds)</option>
            <option value="suite">Suite</option>
        </select><br><br>

        <label for="checkin">Check-in Date:</label><br>
        <input type="date" id="checkin" name="checkin" required><br><br>

        <label for="checkout">Check-out Date:</label><br>
        <input type="date" id="checkout" name="checkout" required><br><br>

        <label for="guests">Number of Guests:</label><br>
        <select id="guests" name="guests" required>
            <option value="">-- Select Number --</option>
            <option value="1">1 Guest</option>
            <option value="2">2 Guests</option>
            <option value="3">3 Guests</option>
            <option value="4">4 Guests</option>
        </select><br><br>

        <label for="message">Special Requests:</label><br>
        <textarea id="message" name="message" rows="4" placeholder="Any special requests?"></textarea><br><br>

        <button type="submit">Book Now</button>
        <button type="reset">Clear</button>
    </form>
    </div>

    <h2>ğŸ  Available Rooms</h2>
    <div style="max-width: 1200px; margin: 30px auto; padding: 0 20px;">
        {% for room in rooms %}
        <div class="gallery-item">
            <div class="gallery-image-wrapper">
                {% if room.room_type == 'single' %}
                    <img src="https://images.unsplash.com/photo-1631049307264-da0ec9d70304?w=400&h=200&fit=crop" alt="Single Room {{ room.room_number }}">
                {% elif room.room_type == 'double' %}
                    <img src="https://images.unsplash.com/photo-1631049307264-da0ec9d70304?w=400&h=200&fit=crop" alt="Double Room {{ room.room_number }}">
                {% elif room.room_type == 'dorm' %}
                    <img src="https://images.unsplash.com/photo-1552321554-5fefe8c9ef14?w=400&h=200&fit=crop" alt="Dorm Room {{ room.room_number }}">
                {% elif room.room_type == 'suite' %}
                    <img src="https://images.unsplash.com/photo-1571508601166-ee0e2e6e6e9e?w=400&h=200&fit=crop" alt="Suite Room {{ room.room_number }}">
                {% endif %}
                <div class="room-badge">{{ room.get_room_type_display }}</div>
                <div class="room-status" style="background: {% if room.status == 'available' %}#28a745{% else %}#dc3545{% endif %};">
                    {{ room.get_status_display|upper }}
                </div>
            </div>
            <div class="gallery-item-content">
                <h3>ğŸ¨ Room {{ room.room_number }}</h3>
                <p class="room-type-text">{{ room.get_room_type_display }}</p>
                <div class="room-features">
                    <span class="feature">ğŸ‘¥ {{ room.capacity }} {% if room.capacity > 1 %}persons{% else %}person{% endif %}</span>
                </div>
                <p class="amenities-text">âœ¨ {{ room.amenities }}</p>
                <div class="gallery-item-price">${{ room.price_per_night }}</div>
                <p class="price-label">per night</p>
            </div>
        </div>
        {% endfor %}
    </div>
    </div>

    <h2>ğŸ“‹ All Rooms Details</h2>

    <h2>ğŸ“‹ Current Bookings</h2>
    <div style="max-width: 1200px; margin: 30px auto; padding: 0 20px;">
    <table border="1">
        <tr>
            <th>Guest Name</th>
            <th>Room No.</th>
            <th>Check-in</th>
            <th>Check-out</th>
            <th>Status</th>
            <th>Action</th>
        </tr>
        {% for booking in bookings %}
        <tr>
            <td>{{ booking.guest.name }}</td>
            <td>{{ booking.room.room_number }}</td>
            <td>{{ booking.check_in_date }}</td>
            <td>{{ booking.check_out_date }}</td>
            <td>{{ booking.get_status_display }}</td>
            <td>
                {% if booking.status != 'checked_out' %}
                <a href="{% url 'checkout_room' booking.id %}">Checkout</a>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </table>
    </div>

    <div class="contact-section">
        <h2>ğŸ“ Contact Information</h2>
        <p><strong>Address:</strong> 123 Hostel Street, City, State 12345</p>
        <p><strong>Phone:</strong> +254 750 168 458</p>
        <p><strong>Email:</strong> alimahrez744@gmail.com</p>
        <p><strong>Hours:</strong> 24/7 Check-in/Check-out Available</p>
    </div>

    <hr>
    
    <div class="links-section">
        <h2 style="width: 100%; margin-bottom: 20px;">ğŸ”§ Backend & Admin</h2>
        <a href="{% url 'show_data' %}" class="link-btn">ğŸ“Š View Database Data</a>
        <a href="/admin/" class="link-btn secondary">ğŸ” Django Admin Panel</a>
    </div>

    <script src="{% static 'js/main.js' %}"></script>
</body>
</html>
